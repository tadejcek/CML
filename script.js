let isMobile=window.matchMedia("(max-width: 480px)").matches;function startTextRotation(){const t=gsap.timeline({repeat:-1}),e=document.querySelector(".rotating-text"),o=window.matchMedia("(max-width: 480px)").matches;["krepijo znanje","informirajo odločanje","sproščajo čas ekip","krajšajo postopke"].forEach((a=>{let n=a;if(o){const t=a.split(" ");t.length>1&&(n=t[0]+"<br>"+t.slice(1).join(" "))}t.to(e,{opacity:0,duration:.3,ease:"power2.out"}),t.to(e,{duration:.09*n.replace(/<br>/g,"").length,onStart:()=>{e.innerHTML=""},onUpdate:function(){const t=n.replace(/<br>/g,""),a=this.progress(),i=Math.floor(a*t.length);if(o){const o=n.split("<br>"),a=o[0].length;e.innerHTML=i<=a?t.slice(0,i):o[0]+"<br>"+t.slice(a,i)}else e.innerHTML=t.slice(0,i)},opacity:1,ease:"none"}),t.to({},{duration:1.2})}))}function startLogoTrack(){gsap.to(".logo-track",{x:"-50%",duration:100,ease:"none",repeat:-1,paused:!0,scrollTrigger:{trigger:".logo",start:"top 80%",toggleActions:"play none none none",once:!0}})}function startStampRotation(){gsap.to(".stamp",{rotation:360,duration:30,ease:"none",repeat:-1})}function startDiagonalReveal(){const t=window.matchMedia("(max-width: 480px)").matches,e=t?3:2,o=t?44:84,a=[332,177,177],n=[620,548],i=document.querySelector(".title");if(!i)return;i.querySelectorAll(".reveal-bar").forEach((t=>t.remove()));const r=[];for(let s=0;s<e;s++){const e=document.createElement("div");e.classList.add("reveal-bar"),e.style.position="absolute",e.style.top=s*o+"px",t||1!=s||(e.style.left="36px"),e.style.width=t?`${a[s]}px`:`${n[s]}px`,e.style.height=`${o}px`,e.style.transformOrigin="left center",e.style.transform="scaleX(0)",i.appendChild(e),r.push(e)}const s=gsap.timeline();return s.to(".title",{opacity:1,duration:.3}),r.forEach(((t,e)=>{s.to(t,{scaleX:1,duration:.6,ease:"power3.inOut"},.15*e),s.to(t,{scaleX:0,transformOrigin:"right center",duration:.5,ease:"power3.inOut"},.15*e+.55)})),s}function startBlocks(){const t=document.querySelector(".block-1"),e=document.querySelector(".block-2"),o=document.querySelector(".block-3");let a=window.innerWidth/2,n=window.innerHeight/2;document.addEventListener("mousemove",(t=>{a=t.clientX,n=t.clientY})),gsap.ticker.add((()=>{const i=a/window.innerWidth-.5,r=n/window.innerHeight-.5,s=gsap.ticker.frame/60,l=4.5*Math.sin(1.3*s),c=3.7*Math.cos(1.5*s),p=4.2*Math.sin(1.7*s),u=3.5*Math.cos(1.1*s),d=4.4*Math.sin(1.2*s),g=3.8*Math.cos(1.8*s);gsap.to(t,{x:40*i+l,y:60*r+c,duration:1.2,ease:"power3.out",overwrite:!0}),gsap.to(e,{x:25*i+p,y:10*r+u,duration:1.4,ease:"power3.out",overwrite:!0}),gsap.to(o,{x:50*i+d,y:35*r+g,duration:1.6,ease:"power3.out",overwrite:!0})}))}function startText(){let t=gsap.timeline({onComplete:()=>{gsap.delayedCall(.2,(()=>e.play()))}});t.to(".text",{scale:1.15,duration:1.2,ease:"power1.inOut",yoyo:!0,repeat:1}),t.to(".text",{duration:.4,text:"",ease:"none"},"=1"),t.to(".text",{duration:1,text:"KMALU BO",ease:"none"});let e=gsap.timeline({paused:!0});e.to(".text",{scale:1.15,duration:1.2,ease:"power1.inOut",yoyo:!0,repeat:-1})}gsap.registerPlugin(TextPlugin),gsap.registerPlugin(ScrollToPlugin),gsap.registerPlugin(ScrollTrigger),document.querySelector(".down-button").addEventListener("click",(()=>{gsap.to(window,{duration:1.2,scrollTo:".logo",ease:"power3.inOut"})})),document.addEventListener("DOMContentLoaded",(function(){const t=gsap.timeline();t.to(".sun",{width:isMobile?820:5073,height:isMobile?820:5073,duration:3,ease:"power2.inOut"}),t.to(".sun-radial",{opacity:0,duration:1.2,ease:"power2.inOut"},"<"),t.to(".sun-linear",{opacity:1,duration:1.2,ease:"power2.inOut"},"<"),t.to(".sun-glow",{opacity:1,duration:1,ease:"power2.out"},"-=0.8"),t.to(".sun-glow",{animation:"sunGlowPulse 3.2s ease-in-out infinite"}),t.to(".blocks",{opacity:1,duration:.5,ease:"power2.out"},"-=0.8"),t.to(".header",{opacity:1,duration:1,ease:"power2.out"},"-=0.6"),t.call(startBlocks),t.add(startDiagonalReveal(),"-=0.2"),t.to(".paragraph",{opacity:1,duration:1,ease:"power3.inOut"},"-=0.4"),t.to([".text"],{opacity:1,duration:1,ease:"power2.out"},"-=0.2"),t.call(startText),t.to([".prijava",".down-button"],{opacity:1,duration:1,ease:"power2.out"},"-=0.2"),t.to([".logo",".footer"],{opacity:1,duration:0,display:"flex"}),t.call(startLogoTrack),t.to(".stamp",{opacity:1,duration:1,ease:"power2.out"},"-=0.6"),t.call(startStampRotation),t.call(startTextRotation)}));